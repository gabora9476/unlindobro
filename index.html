<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Entre el Ser y el Tiempo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Crimson Text', 'Georgia', serif;
            overflow: hidden;
            background: linear-gradient(135deg, #1a0a1e 0%, #2d1b3d 100%);
            height: 100vh;
            position: relative;
        }

        /* CONTAINER DEL LIBRO */
        .book-container {
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            perspective: 1500px;
            padding: 10px;
        }

        /* LIBRO */
        .book {
            position: relative;
            width: 95vw;
            height: 85vh;
            max-height: 800px;
            transform-style: preserve-3d;
            touch-action: pan-y;
        }

        /* PÁGINAS DEL LIBRO */
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #fffef8 0%, #ffffff 3%, #ffffff 97%, #f5f5f0 100%);
            border-radius: 0 15px 15px 0;
            box-shadow: 
                0 10px 30px rgba(0,0,0,0.3),
                inset -5px 0 20px rgba(0,0,0,0.1),
                inset 5px 0 10px rgba(255,255,255,0.5);
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);
            backface-visibility: hidden;
            overflow: hidden;
        }

        .page.flipped {
            transform: rotateY(-180deg);
        }

        /* CONTENIDO DE LA PÁGINA */
        .page-content {
            padding: 30px 25px;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
        }

        .page-content::-webkit-scrollbar {
            width: 4px;
        }

        .page-content::-webkit-scrollbar-thumb {
            background: rgba(255, 105, 180, 0.3);
            border-radius: 3px;
        }

        /* TEXTOS */
        h1 {
            font-size: clamp(24px, 6vw, 42px);
            color: #d946a6;
            text-align: center;
            margin-bottom: 15px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: clamp(14px, 3.5vw, 20px);
            color: #9333ea;
            text-align: center;
            font-style: italic;
            margin-bottom: 30px;
        }

        .text-content {
            font-size: clamp(14px, 3.2vw, 17px);
            line-height: 1.7;
            color: #2d1b3d;
            text-align: justify;
            margin-bottom: 20px;
        }

        .photo {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(217, 70, 166, 0.3);
            border: 3px solid rgba(217, 70, 166, 0.2);
        }

        .photo-caption {
            text-align: center;
            color: #d946a6;
            font-style: italic;
            font-size: clamp(12px, 2.8vw, 15px);
            margin-top: 10px;
            margin-bottom: 15px;
        }

        .center-emoji {
            text-align: center;
            font-size: clamp(40px, 10vw, 70px);
            margin: 30px 0;
        }

        /* INDICADORES DE PÁGINA */
        .page-indicators {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 100;
        }

        .indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
        }

        .indicator.active {
            background: #d946a6;
            transform: scale(1.2);
        }

        /* INDICADOR DE GESTO */
        .swipe-hint {
            position: fixed;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
            animation: fadeInOut 3s ease-in-out;
            pointer-events: none;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            20%, 80% { opacity: 1; }
        }

        .swipe-icon {
            font-size: 20px;
        }

        /* BOTONES FINALES */
        .final-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
            align-items: center;
        }

        .final-btn {
            padding: 15px 40px;
            font-size: clamp(16px, 3.5vw, 20px);
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s;
            font-family: inherit;
            width: 100%;
            max-width: 350px;
        }

        .btn-yes {
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            color: white;
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.5);
        }

        .btn-yes:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 20, 147, 0.7);
        }

        .btn-no {
            background: linear-gradient(135deg, #6b7280, #9ca3af);
            color: white;
            box-shadow: 0 10px 30px rgba(107, 114, 128, 0.4);
        }

        .btn-no:hover {
            transform: scale(1.05);
        }

        /* PORTADA */
        .cover-image {
            width: 100%;
            max-height: 50vh;
            object-fit: contain;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(217, 70, 166, 0.3);
            border: 3px solid rgba(217, 70, 166, 0.2);
        }

        /* MEDIA QUERIES MÓVIL */
        @media (max-width: 768px) {
            .book {
                width: 95vw;
                height: 80vh;
            }

            .page-content {
                padding: 25px 20px;
            }

            .page-indicators {
                bottom: 25px;
            }

            .swipe-hint {
                bottom: 60px;
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .page-content {
                padding: 20px 15px;
            }

            .final-buttons {
                gap: 12px;
            }

            .final-btn {
                padding: 12px 30px;
            }
        }
    </style>
</head>
<body>
    <!-- LIBRO -->
    <div class="book-container">
        <div class="book">
            <!-- Las páginas se generarán dinámicamente -->
        </div>
    </div>
    
    <!-- INDICADORES DE PÁGINA -->
    <div class="page-indicators" id="pageIndicators"></div>
    
    <!-- INDICADOR DE GESTO -->
    <div class="swipe-hint" id="swipeHint">
        <span class="swipe-icon">👉</span>
        <span>Desliza para pasar la página</span>
        <span class="swipe-icon">👈</span>
    </div>

    <script>
        // CONTENIDO DE LAS PÁGINAS
        const pages = [
            // Portada
            `<div style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;text-align:center;">
                <h1>Entre el Ser y el Tiempo</h1>
                <p class="subtitle">Nunca es tarde para aprender</p>
                <img src="blob:https://aistudio.google.com/a0ff0800-612e-42be-9f44-12bccbc1267b" alt="Nuestra historia" class="cover-image">
                <p class="text-content" style="font-size:22px;font-style:italic;color:#d946a6;">Quiero contarte una historia...</p>
            </div>`,
            
            // Página 1
            `<p class="text-content">Últimamente he sentido un vacío que no puedo ignorar. Esos mensajes que solían alegrar mi día, los buenos días que me hacían sonreír antes de abrir los ojos, las buenas noches que me acompañaban en mis sueños cuando no dormías junto a mí... los extraño.</p>
            <p class="text-content">Siento que ya no te hago falta, que ya no soy necesario en tu día a día. Y eso, Ana, me duele más de lo que las palabras pueden expresar.</p>
            <div class="center-emoji">😔</div>`,
            
            // Página 2
            `<img src="https://i.ibb.co/PZK31JZ4/photo-1-2025-10-22-18-38-20.jpg" alt="Momento 1" class="photo">
            <p class="photo-caption">¿Recuerdas este día? Éramos felices...</p>
            <p class="text-content">Miro estas fotos y veo lo que fuimos, lo que construimos juntos. Cada sonrisa, cada abrazo, cada momento capturado en el tiempo me recuerda por qué no quiero dejarte ir.</p>`,
            
            // Página 3
            `<img src="https://i.ibb.co/q3HZJt0D/photo-2-2025-10-22-18-38-20.jpg" alt="Momento 2" class="photo">
            <p class="photo-caption">Tu sonrisa iluminaba todo</p>
            <p class="text-content">No quiero presionarte ni molestarte, pero las ganas de no perderte son tan fuertes que necesito decirte todo esto. Si aún queda algo de lo que alguna vez te hice sentir por mí, quiero que lo fortalezcamos.</p>`,
            
            // Página 4
            `<img src="https://i.ibb.co/8Lrd5Db1/photo-3-2025-10-22-18-38-20.jpg" alt="Momento 3" class="photo">
            <p class="photo-caption">En la tranquilidad de estar juntos</p>
            <p class="text-content">Ya no quiero nada escondido. Quiero poder publicarte conmigo en las contadas fotos que subo. Quiero que tengamos algo bonito, real como lo éramos, y hasta más si es posible.</p>`,
            
            // Página 5
            `<img src="https://i.ibb.co/4nBFSYLp/photo-4-2025-10-22-18-38-20.jpg" alt="Momento 4" class="photo">
            <p class="photo-caption">Compartiendo el mundo</p>
            <p class="text-content">No paro de pensar en ti, ni en los momentos tan bonitos y locos que tuvimos. Lo que empezó como algo sin sentido para mí, tiene ahora mucho sentido. Y no quiero que se acabe, mi demonio. 💗😈</p>`,
            
            // Página 6
            `<img src="https://i.ibb.co/Z1gsrfvy/photo-5-2025-10-22-18-38-20.jpg" alt="Momento 5" class="photo">
            <p class="photo-caption">Robando besos y creando recuerdos</p>
            <p class="text-content">Prometo tomar más fotos. Prometo darte el amor que mereces, ese amor que sé que tengo pero que tal vez me cuesta demostrar. Prometo ponerme en tus zapatos y entender lo que necesitas.</p>`,
            
            // Página 7
            `<img src="https://i.ibb.co/KxWT2v9G/photo-6-2025-10-22-18-38-20.jpg" alt="Momento 6" class="photo">
            <p class="photo-caption">Compartiendo alegrías</p>
            <p class="text-content">Sé que ambos tenemos cosas que mejorar, nadie es perfecto. Pero en mi balanza del amor, son más las cosas buenas que me das que las negativas. Por eso quiero que nos demos una oportunidad de intentarlo de nuevo.</p>`,
            
            // Página 8
            `<img src="https://i.ibb.co/RkP5YHcZ/photo-7-2025-10-22-18-38-20.jpg" alt="Momento 7" class="photo">
            <p class="photo-caption">Donde todo tenía sentido</p>
            <p class="text-content">Sin secretos, sin distracciones. Enfocándonos en tener algo más bonito de lo que teníamos. Salidas, paseos, regalos, y muchas cosas más. Si me hacía falta una motivación, es la de no perderte.</p>`,
            
            // Página 9
            `<img src="https://i.ibb.co/8gDRCFTf/photo-9-2025-10-22-18-38-20.jpg" alt="Momento 8" class="photo">
            <p class="photo-caption">Así quiero verte siempre: sonriendo a mi lado</p>
            <p class="text-content">Tal vez creas que no hay nada que hacer, pero si me amas como yo a ti, estoy seguro de que podemos salir de esta y de cualquier cosa que se nos atraviese. Después de la tormenta viene la calma, y ahí veremos los frutos. 🌹</p>`,
            
            // Página 10
            `<img src="https://i.ibb.co/GQ7pjTFc/photo-10-2025-10-22-18-38-20.jpg" alt="Momento 9" class="photo">
            <p class="photo-caption">Hasta los pequeños momentos son especiales contigo</p>
            <p class="text-content">Haré todo lo que deba hacer. Solo te pido que me esperes un poquito más... Te prometo que todo estará bien y será mejor que esto. Quiero un futuro bonito contigo, mi corazón rosa. 💗</p>`,
            
            // Página Final
            `<div style="text-align:center;">
                <p class="text-content" style="font-size:20px;">No hay muchas imágenes de todo lo lindo que hemos vivido, pero por ti compraría un álbum de un millón de hojas para guardar todos los momentos contigo.</p>
                <div class="center-emoji">💗</div>
                <h1 style="font-size:clamp(32px,8vw,56px);">¿Quieres ser mi novia?</h1>
                <p class="text-content" style="font-size:18px;">Quiero estar contigo, aprender contigo, crecer contigo...</p>
                <div class="final-buttons">
                    <button class="final-btn btn-yes" onclick="window.location.href='https://wa.me/584242791824?text=Sí%20quiero%20intentarlo%20de%20nuevo%20contigo%20💗'">Sí, lo intentemos 💗</button>
                    <button class="final-btn btn-no" onclick="showSadPage()">No puedo...</button>
                </div>
            </div>`,
            
            // Página de Rechazo
            `<div style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;text-align:center;">
                <div class="center-emoji">😢</div>
                <h1 style="font-size:clamp(28px,7vw,42px);">Entiendo... y respeto tu decisión.</h1>
                <p class="text-content" style="font-size:22px;color:#d946a6;">Siempre te amaré, mi demonio. Cuídate mucho. 💔</p>
            </div>`
        ];

        let currentPage = 0;
        const bookEl = document.querySelector('.book');
        let isAnimating = false;
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;

        // CREAR PÁGINAS
        function createPages() {
            pages.forEach((content, index) => {
                const page = document.createElement('div');
                page.className = 'page';
                page.innerHTML = `<div class="page-content">${content}</div>`;
                // CORRECCIÓN: Asegurar que el z-index se establezca correctamente
                page.style.zIndex = pages.length - index;
                bookEl.appendChild(page);
            });
            
            // Crear indicadores de página
            const indicatorsContainer = document.getElementById('pageIndicators');
            for (let i = 0; i < pages.length - 1; i++) {
                const indicator = document.createElement('div');
                indicator.className = 'indicator';
                if (i === 0) indicator.classList.add('active');
                indicatorsContainer.appendChild(indicator);
            }
            
            updateNav();
            
            // Ocultar la pista de deslizamiento después de 5 segundos
            setTimeout(() => {
                document.getElementById('swipeHint').style.display = 'none';
            }, 5000);
        }

        function nextPage() {
            if (currentPage < pages.length - 1 && !isAnimating) {
                isAnimating = true;
                const pageEl = bookEl.children[currentPage];
                pageEl.classList.add('flipped');
                currentPage++;
                updateNav();
                
                // Actualizar indicadores
                const indicators = document.querySelectorAll('.indicator');
                indicators.forEach((ind, idx) => {
                    if (idx === currentPage) {
                        ind.classList.add('active');
                    } else {
                        ind.classList.remove('active');
                    }
                });
                
                setTimeout(() => {
                    isAnimating = false;
                }, 600);
            }
        }

        function prevPage() {
            if (currentPage > 0 && !isAnimating) {
                isAnimating = true;
                currentPage--;
                const pageEl = bookEl.children[currentPage];
                pageEl.classList.remove('flipped');
                updateNav();
                
                // Actualizar indicadores
                const indicators = document.querySelectorAll('.indicator');
                indicators.forEach((ind, idx) => {
                    if (idx === currentPage) {
                        ind.classList.add('active');
                    } else {
                        ind.classList.remove('active');
                    }
                });
                
                setTimeout(() => {
                    isAnimating = false;
                }, 600);
            }
        }

        function showSadPage() {
            nextPage();
            setTimeout(() => window.close(), 8000);
        }

        function updateNav() {
            // Ocultar indicadores en la última página
            const indicators = document.getElementById('pageIndicators');
            if (currentPage === pages.length - 1) {
                indicators.style.display = 'none';
            } else {
                indicators.style.display = 'flex';
            }
        }

        // DETECCIÓN DE GESTOS MEJORADA
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });

        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, { passive: true });

        function handleSwipe() {
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            const minSwipeDistance = 50;
            
            // Verificar que el swipe sea principalmente horizontal
            if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > minSwipeDistance) {
                if (deltaX < 0) {
                    // Swipe hacia la izquierda - página siguiente
                    nextPage();
                } else {
                    // Swipe hacia la derecha - página anterior
                    prevPage();
                }
            }
        }

        // NAVEGACIÓN CON TECLADO (para escritorio)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextPage();
            if (e.key === 'ArrowLeft') prevPage();
        });

        // PREVENIR ZOOM EN DOBLE TAP
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // INICIALIZAR
        createPages();
    </script>
</body>
</html>
